(function ($) {
    Galleria.addTheme({
        name: "classic",
        author: "Galleria",
        css: "../css/galleria.classic.css",
        defaults: {
            transition: "slide",
            thumbCrop: "height",
            _toggleInfo: true
        }, init: function (options) {
            var touch = Galleria.TOUCH,
                click = touch ? "touchstart" : "click";
            this.$("loader,counter").show().css("opacity", .4);
            if (!touch) {
                this.addIdleState(this.get("image-nav-left"), {
                    left: -50
                });
                this.addIdleState(this.get("image-nav-right"), {
                    right: -50
                });
                this.addIdleState(this.get("counter"), {
                    opacity: 0
                })
            }
            
            this.bind("thumbnail", function (e) {
                if (!touch) {
                    $(e.thumbTarget).css("opacity", .6).parent().hover(function () {
                        $(this).not(".active").children().stop().fadeTo(100, 1)
                    }, function () {
                        $(this).not(".active").children().stop().fadeTo(400, .6)
                    });
                    if (e.index === this.getIndex()) {
                        $(e.thumbTarget).css("opacity", 1)
                    }
                } else {
                    $(e.thumbTarget).css("opacity", this.getIndex() ? 1 : .6)
                }
            });
            this.bind("loadstart", function (e) {
                if (!e.cached) {
                    this.$("loader").show().fadeTo(200, .4)
                }
                this.$("info").toggle(this.hasInfo());
                $(e.thumbTarget).css("opacity", 1).parent().siblings().children().css("opacity", .6)
            });
            this.bind("loadfinish", function (e) {
                this.$("loader").fadeOut(200)
            })
        }
    })
})(jQuery);